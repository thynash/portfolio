{"ast":null,"code":"import{frame}from'motion-dom';import{MotionGlobalConfig}from'motion-utils';import{useRef,useEffect}from'react';import{useInstantLayoutTransition}from'../projection/use-instant-layout-transition.mjs';import{useForceUpdate}from'./use-force-update.mjs';function useInstantTransition(){const[forceUpdate,forcedRenderCount]=useForceUpdate();const startInstantLayoutTransition=useInstantLayoutTransition();const unlockOnFrameRef=useRef(-1);useEffect(()=>{/**\n         * Unblock after two animation frames, otherwise this will unblock too soon.\n         */frame.postRender(()=>frame.postRender(()=>{/**\n             * If the callback has been called again after the effect\n             * triggered this 2 frame delay, don't unblock animations. This\n             * prevents the previous effect from unblocking the current\n             * instant transition too soon. This becomes more likely when\n             * used in conjunction with React.startTransition().\n             */if(forcedRenderCount!==unlockOnFrameRef.current)return;MotionGlobalConfig.instantAnimations=false;}));},[forcedRenderCount]);return callback=>{startInstantLayoutTransition(()=>{MotionGlobalConfig.instantAnimations=true;forceUpdate();callback();unlockOnFrameRef.current=forcedRenderCount+1;});};}function disableInstantTransitions(){MotionGlobalConfig.instantAnimations=false;}export{disableInstantTransitions,useInstantTransition};","map":{"version":3,"names":["frame","MotionGlobalConfig","useRef","useEffect","useInstantLayoutTransition","useForceUpdate","useInstantTransition","forceUpdate","forcedRenderCount","startInstantLayoutTransition","unlockOnFrameRef","postRender","current","instantAnimations","callback","disableInstantTransitions"],"sources":["/home/antisyn/portfolio/src/components/node_modules/framer-motion/dist/es/utils/use-instant-transition.mjs"],"sourcesContent":["import { frame } from 'motion-dom';\nimport { MotionGlobalConfig } from 'motion-utils';\nimport { useRef, useEffect } from 'react';\nimport { useInstantLayoutTransition } from '../projection/use-instant-layout-transition.mjs';\nimport { useForceUpdate } from './use-force-update.mjs';\n\nfunction useInstantTransition() {\n    const [forceUpdate, forcedRenderCount] = useForceUpdate();\n    const startInstantLayoutTransition = useInstantLayoutTransition();\n    const unlockOnFrameRef = useRef(-1);\n    useEffect(() => {\n        /**\n         * Unblock after two animation frames, otherwise this will unblock too soon.\n         */\n        frame.postRender(() => frame.postRender(() => {\n            /**\n             * If the callback has been called again after the effect\n             * triggered this 2 frame delay, don't unblock animations. This\n             * prevents the previous effect from unblocking the current\n             * instant transition too soon. This becomes more likely when\n             * used in conjunction with React.startTransition().\n             */\n            if (forcedRenderCount !== unlockOnFrameRef.current)\n                return;\n            MotionGlobalConfig.instantAnimations = false;\n        }));\n    }, [forcedRenderCount]);\n    return (callback) => {\n        startInstantLayoutTransition(() => {\n            MotionGlobalConfig.instantAnimations = true;\n            forceUpdate();\n            callback();\n            unlockOnFrameRef.current = forcedRenderCount + 1;\n        });\n    };\n}\nfunction disableInstantTransitions() {\n    MotionGlobalConfig.instantAnimations = false;\n}\n\nexport { disableInstantTransitions, useInstantTransition };\n"],"mappings":"AAAA,OAASA,KAAK,KAAQ,YAAY,CAClC,OAASC,kBAAkB,KAAQ,cAAc,CACjD,OAASC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CACzC,OAASC,0BAA0B,KAAQ,iDAAiD,CAC5F,OAASC,cAAc,KAAQ,wBAAwB,CAEvD,QAAS,CAAAC,oBAAoBA,CAAA,CAAG,CAC5B,KAAM,CAACC,WAAW,CAAEC,iBAAiB,CAAC,CAAGH,cAAc,CAAC,CAAC,CACzD,KAAM,CAAAI,4BAA4B,CAAGL,0BAA0B,CAAC,CAAC,CACjE,KAAM,CAAAM,gBAAgB,CAAGR,MAAM,CAAC,CAAC,CAAC,CAAC,CACnCC,SAAS,CAAC,IAAM,CACZ;AACR;AACA,WACQH,KAAK,CAACW,UAAU,CAAC,IAAMX,KAAK,CAACW,UAAU,CAAC,IAAM,CAC1C;AACZ;AACA;AACA;AACA;AACA;AACA,eACY,GAAIH,iBAAiB,GAAKE,gBAAgB,CAACE,OAAO,CAC9C,OACJX,kBAAkB,CAACY,iBAAiB,CAAG,KAAK,CAChD,CAAC,CAAC,CAAC,CACP,CAAC,CAAE,CAACL,iBAAiB,CAAC,CAAC,CACvB,MAAQ,CAAAM,QAAQ,EAAK,CACjBL,4BAA4B,CAAC,IAAM,CAC/BR,kBAAkB,CAACY,iBAAiB,CAAG,IAAI,CAC3CN,WAAW,CAAC,CAAC,CACbO,QAAQ,CAAC,CAAC,CACVJ,gBAAgB,CAACE,OAAO,CAAGJ,iBAAiB,CAAG,CAAC,CACpD,CAAC,CAAC,CACN,CAAC,CACL,CACA,QAAS,CAAAO,yBAAyBA,CAAA,CAAG,CACjCd,kBAAkB,CAACY,iBAAiB,CAAG,KAAK,CAChD,CAEA,OAASE,yBAAyB,CAAET,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}